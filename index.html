<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>moæŠ€æœ¯åšå®¢</title>
   
    <link rel="stylesheet" href="assets/css/sidebar.css">
    <script src="https://cdn.jsdelivr.net/npm/markdown-it@13.0.1/dist/markdown-it.min.js"></script>
    <script src="https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.min.js"></script>
    <style>
      /* è¡¥å……sidebar.cssä¸­æ²¡æœ‰çš„æ ·å¼ */
      .content h1 { font-size: 2em; margin-bottom: 0.5em; }
      .content h2 { font-size: 1.5em; margin-top: 1.5em; border-bottom: 1px solid #eee; padding-bottom: 0.3em; }
      .content h3 { font-size: 1.3em; margin-top: 1.2em; }
      .content h4 { font-size: 1.1em; margin-top: 1em; }
      .content h5 { font-size: 1em; margin-top: 0.8em; }
      .content ul, .content ol { margin: 1em 0; padding-left: 2em; }
      .content li { margin: 0.5em 0; }
      .content pre code { 
        background-color: transparent; 
        color: inherit; 
        padding: 0; 
      }
      .content img { 
        max-width: 100%; 
        height: auto; 
      }
      .loading { 
        text-align: center; 
        padding: 50px; 
        color: #666; 
      }
      
      /* PDFé˜…è¯»å™¨æ ·å¼ */
      .pdf-container {
        width: 100%;
        height: 800px;
        border: 1px solid #ddd;
        border-radius: 4px;
        overflow: hidden;
      }
      
      .pdf-controls {
        background-color: #f8f9fa;
        padding: 10px;
        border-bottom: 1px solid #ddd;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      
      .pdf-controls button {
        padding: 5px 10px;
        border: 1px solid #ddd;
        background-color: white;
        border-radius: 3px;
        cursor: pointer;
      }
      
      .pdf-controls button:hover {
        background-color: #f0f0f0;
      }
      
      .pdf-controls input {
        width: 60px;
        padding: 5px;
        border: 1px solid #ddd;
        border-radius: 3px;
      }
      
      .pdf-canvas-container {
        overflow: auto;
        height: calc(100% - 50px);
        background-color: #525659;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        padding: 20px 0;
      }
      
      .pdf-page {
        margin: 10px auto;
        box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        background-color: white;
      }
    </style>
  </head>
  <body>
    
    
    <div class="sidebar">
      <div class="sidebar-inner">
        <ul class="sidebar-nav">
          <li class="sidebar-nav-toc active">
            ç›®å½•
          </li>
        </ul>
        
        <div class="sidebar-post-container">
          <div class="sidebar-post-author">
            <div class="sidebar-post-author-avatar"></div>
            <p class="sidebar-post-author-name">moæŠ€æœ¯åšå®¢</p>
          </div>
        </div>
        
        <div class="sidebar-toc">
          <div class="sidebar-toc-content">
            <div class="toc">
              <div class="toc-level-1 toc-header">
                ä»‹ç»
              </div>
              <div class="toc-level-2">
                <a href="#" onclick="loadMarkdown('README.md')">ä»‹ç»</a>
              </div>
              
              <div class="toc-level-1 toc-header">
                markdownåŸºç¡€è¯­æ³•ç»ƒä¹ 
              </div>
              <div class="toc-level-2">
                <a href="#" onclick="loadMarkdown('markdownçš„ç»ƒä¹ .md')">markdownçš„ç»ƒä¹ </a>
              </div>
              
              <div class="toc-level-1 toc-header">
                Git
              </div>
              <div class="toc-level-2">
                <a href="#" onclick="loadMarkdown('å…³äºGit/Git.1å­¦ä¹ .md')">Gitçš„å­¦ä¹ </a>
              </div>
              <div class="toc-level-2">
                <a href="#" onclick="loadMarkdown('å…³äºGit/Git.2ä»£ç æ¨é€.md')">Gitçš„ä»£ç æ¨é€</a>
              </div>
              
              <div class="toc-level-1 toc-header">
                CTF
              </div>
              <div class="toc-level-2 toc-header">
                ä¸€Â·Web
              </div>
              <div class="toc-level-3 toc-header">
                3.æ³¨å…¥ç±»
              </div>
              <div class="toc-level-4">
                <a href="#" onclick="loadMarkdown('SQL/0x0.md')">SQLæ³¨å…¥çš„å­¦ä¹ </a>
              </div>
              <div class="toc-level-5">
                <a href="#" onclick="loadMarkdown('SQL/0x3ç›²æ³¨.md')">SQLç›²æ³¨</a>
              </div>
              <div class="toc-level-1 toc-header">
                Python
              </div>
              <div class="toc-level-2">
                <a href="#" onclick="loadPDF('PythonBook/Pythonç¼–ç¨‹ä»å…¥é—¨åˆ°å®è·µç¬¬3ç‰ˆ.pdf')">PythonåŸºç¡€</a>
              </div>
              <div class="toc-level-1 toc-header">
                å¤ä¹ ä¸€ä¸‹ä¸‹
              </div>
              <div class="toc-level-2 toc-header">
                Javaçš„å­¦ä¹ 
              </div>
              <div class="toc-level-3 toc-header">
                ä¸€ Javaå…¥é—¨
              </div>
              <div class="toc-level-4">
                <a href="#" onclick="loadMarkdown('Javaçš„å¤ä¹ /Java å…¥é—¨.md')">1.Java çš„è¿è¡Œ</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- ä¾§è¾¹æ åˆ‡æ¢æŒ‰é’® -->
    <div class="sidebar-toggle" id="sidebarToggle">
      <div class="sidebar-toggle-line"></div>
      <div class="sidebar-toggle-line"></div>
      <div class="sidebar-toggle-line"></div>
    </div>
    
    <div class="main-container">
      <div class="main-inner">
        <div class="content-wrap">
          <div class="content" id="content">
            <div class="loading">
              <h1>ğŸ»æ¬¢è¿ä½¿ç”¨æ–‡æ¡£æŸ¥çœ‹å™¨ğŸ»</h1>
              <p>ğŸ»è¯·ä»å·¦ä¾§ç›®å½•é€‰æ‹©è¦æŸ¥çœ‹çš„æ–‡æ¡£ğŸ»</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    





































    
    <script>
      // ä¾§è¾¹æ åˆ‡æ¢åŠŸèƒ½
      document.addEventListener('DOMContentLoaded', function() {
        const sidebar = document.querySelector('.sidebar');
        const sidebarToggle = document.getElementById('sidebarToggle');
        
        if (sidebarToggle) {
          sidebarToggle.addEventListener('click', function() {
            sidebar.classList.toggle('active');
            sidebarToggle.classList.toggle('active');
          });
        }
        
        // å“åº”å¼å¤„ç†
        function handleResize() {
          if (window.innerWidth > 992) {
            sidebar.classList.remove('active');
            sidebarToggle.classList.remove('active');
          }
        }
        
        window.addEventListener('resize', handleResize);
        handleResize();
      });
      
      // åˆå§‹åŒ–markdown-it
      const md = window.markdownit({
        html: true,
        linkify: true,
        typographer: true,
        breaks: true,
        highlight: function (str, lang) {
          return '<pre><code class="language-' + lang + '">' + str + '</code></pre>';
        }
      });
      
      // è®¾ç½®PDF.js worker
      pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js';
      
      // åŠ è½½Markdownæ–‡ä»¶
      async function loadMarkdown(filePath) {
        const content = document.getElementById('content');
        content.innerHTML = '<div class="loading">æ­£åœ¨åŠ è½½æ–‡æ¡£...</div>';
        
        try {
          const response = await fetch(filePath);
          if (!response.ok) {
            throw new Error('æ–‡ä»¶ä¸å­˜åœ¨æˆ–æ— æ³•è®¿é—®');
          }
          
          const markdownText = await response.text();
          const html = md.render(markdownText);
          content.innerHTML = html;
          
          // æ›´æ–°é¡µé¢æ ‡é¢˜
          const title = filePath.split('/').pop().replace('.md', '');
          document.title = title + ' - moæŠ€æœ¯åšå®¢';
          
        } catch (error) {
          content.innerHTML = '<div class="loading"><h2>åŠ è½½å¤±è´¥</h2><p>' + error.message + '</p></div>';
        }
      }
      
      // è®¾ç½®PDF.js worker
      pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js';
      
      // æ£€æµ‹æ˜¯å¦ä¸ºç§»åŠ¨è®¾å¤‡æˆ–ç‰¹æ®Šæµè§ˆå™¨
      function isMobileDevice() {
        // æ£€æµ‹ç”¨æˆ·ä»£ç†
        const userAgent = navigator.userAgent.toLowerCase();
        const isMobile = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(userAgent);
        const isWeChat = /micromessenger/i.test(userAgent);
        const isSmallScreen = window.innerWidth <= 768;
        
        return isMobile || isWeChat || isSmallScreen;
      }
      
      // åŠ è½½PDFæ–‡ä»¶ - ä¸“é—¨ä¼˜åŒ–ç§»åŠ¨ç«¯ï¼Œæä¾›å¤šç§æ–¹æ¡ˆ
      function loadPDF(filePath) {
        const content = document.getElementById('content');
        content.innerHTML = '<div class="loading">æ­£åœ¨åŠ è½½PDF...</div>';
        
        // æ£€æµ‹ç½‘ç»œçŠ¶æ€å’Œè®¾å¤‡ç±»å‹
        const isSlowNetwork = navigator.connection ? 
          (navigator.connection.effectiveType === 'slow-2g' || 
           navigator.connection.effectiveType === '2g' ||
           navigator.connection.effectiveType === '3g') : false;
        
        const isLowEndDevice = navigator.hardwareConcurrency ? 
          navigator.hardwareConcurrency <= 2 : false;
        
        console.log('ç½‘ç»œçŠ¶å†µ:', isSlowNetwork ? 'æ…¢é€Ÿç½‘ç»œ' : 'æ­£å¸¸ç½‘ç»œ');
        console.log('è®¾å¤‡æ€§èƒ½:', isLowEndDevice ? 'ä½ç«¯è®¾å¤‡' : 'æ­£å¸¸è®¾å¤‡');
        
        // æ ¹æ®ç½‘ç»œå’Œè®¾å¤‡é€‰æ‹©åŠ è½½æ–¹æ¡ˆ
        if (isSlowNetwork || isLowEndDevice) {
          console.log('ä½¿ç”¨ç®€åŒ–åŠ è½½æ–¹æ¡ˆ');
          showSimplePDFOptions(filePath);
        } else {
          console.log('ä½¿ç”¨PDF.jså®Œæ•´åŠ è½½ï¼Œç¡®ä¿ç§»åŠ¨ç«¯å…¼å®¹');
          loadPDFWithPDFJS(filePath);
        }
        
        const title = filePath.split('/').pop().replace('.pdf', '');
        document.title = title + ' - moæŠ€æœ¯åšå®¢';
      }
      
      // ç®€åŒ–çš„PDFé€‰é¡¹ç•Œé¢
      function showSimplePDFOptions(filePath) {
        const content = document.getElementById('content');
        content.innerHTML = `
          <div class="loading" style="padding: 20px; text-align: center;">
            <h2 style="margin-bottom: 15px;">ğŸ“„ PDFæŸ¥çœ‹é€‰é¡¹</h2>
            <p style="margin-bottom: 20px; color: #666;">æ£€æµ‹åˆ°ç½‘ç»œè¾ƒæ…¢æˆ–è®¾å¤‡æ€§èƒ½æœ‰é™ï¼Œè¯·é€‰æ‹©æŸ¥çœ‹æ–¹å¼ï¼š</p>
            <div style="display: flex; flex-direction: column; gap: 12px;">
              <button onclick="loadPDFWithPDFJS('${filePath}')" style="padding: 15px; background: #007bff; color: white; border: none; border-radius: 6px; font-size: 16px; cursor: pointer;">
                ğŸ“– åœ¨çº¿æŸ¥çœ‹ (æ¨è)
                <div style="font-size: 12px; margin-top: 5px; opacity: 0.9;">å®Œæ•´åŠŸèƒ½ï¼Œä½†åŠ è½½è¾ƒæ…¢</div>
              </button>
              <a href="${filePath}" target="_blank" style="display: block; padding: 15px; background: #28a745; color: white; text-decoration: none; text-align: center; border-radius: 6px; font-size: 16px;">
                ğŸ”— æ–°çª—å£æ‰“å¼€
                <div style="font-size: 12px; margin-top: 5px; opacity: 0.9;">ä½¿ç”¨æµè§ˆå™¨é»˜è®¤PDFæŸ¥çœ‹å™¨</div>
              </a>
              <a href="${filePath}" download style="display: block; padding: 15px; background: #6c757d; color: white; text-decoration: none; text-align: center; border-radius: 6px; font-size: 16px;">
                ğŸ“¥ ä¸‹è½½PDF
                <div style="font-size: 12px; margin-top: 5px; opacity: 0.9;">ä¸‹è½½åˆ°æœ¬åœ°æŸ¥çœ‹</div>
              </a>
            </div>
            <button onclick="location.reload()" style="margin-top: 20px; padding: 10px 20px; background: #ffc107; color: black; border: none; border-radius: 4px; cursor: pointer;">
              ğŸ”„ é‡æ–°æ£€æµ‹ç½‘ç»œ
            </button>
          </div>
        `;
      }
      
      // iframeåŠ è½½PDFï¼ˆé€‚ç”¨äºæ”¯æŒè‰¯å¥½æ¡Œé¢æµè§ˆå™¨ï¼‰
      function loadPDFWithIframe(filePath) {
        const content = document.getElementById('content');
        
        const pdfContainer = `
          <div class="pdf-container">
            <div class="pdf-controls">
              <span style="color: #666; padding: 10px; font-size: 14px;">
                ğŸ“„ è¿ç»­æ»šåŠ¨æŸ¥çœ‹
              </span>
              <div style="margin-left: auto;">
                <button onclick="zoomInPDF()">æ”¾å¤§</button>
                <button onclick="zoomOutPDF()">ç¼©å°</button>
                <button onclick="resetPDF()">é‡ç½®</button>
                <button onclick="fallbackToPDFJS()">åˆ‡æ¢æ¨¡å¼</button>
              </div>
            </div>
            <div style="height: calc(100% - 50px); background: #525659;">
              <iframe id="pdfFrame" 
                      src="${filePath}#view=FitH" 
                      style="width: 100%; height: 100%; border: none; background: white;"
                      frameborder="0"
                      onload="console.log('PDF iframeåŠ è½½æˆåŠŸ')"
                      onerror="console.log('PDF iframeåŠ è½½å¤±è´¥ï¼Œåˆ‡æ¢åˆ°PDF.js'); fallbackToPDFJS();">
              </iframe>
            </div>
          </div>
        `;
        
        content.innerHTML = pdfContainer;
        
        // æ£€æµ‹iframeæ˜¯å¦æˆåŠŸåŠ è½½
        setTimeout(() => {
          const iframe = document.getElementById('pdfFrame');
          try {
            // å°è¯•è®¿é—®iframeå†…å®¹æ¥æ£€æµ‹æ˜¯å¦æˆåŠŸ
            if (iframe.contentDocument || iframe.contentWindow) {
              console.log('PDF iframeåŠ è½½æ£€æµ‹æˆåŠŸ');
            }
          } catch (e) {
            console.log('PDF iframeè®¿é—®å¤±è´¥ï¼Œå¯èƒ½æ˜¯è·¨åŸŸæˆ–ä¸æ”¯æŒï¼Œåˆ‡æ¢åˆ°PDF.js');
            fallbackToPDFJS();
          }
        }, 3000);
        
        // å…¨å±€å‡½æ•°
        window.zoomInPDF = function() {
          const iframe = document.getElementById('pdfFrame');
          if (iframe) {
            const currentSrc = iframe.src;
            const newScale = Math.min((currentSrc.match(/zoom=([\d.]+)/) ? parseFloat(RegExp.$1) * 1.2 : 1.5), 3);
            iframe.src = currentSrc.replace(/#.*$/, '') + `#view=FitH&zoom=${newScale}`;
          }
        };
        
        window.zoomOutPDF = function() {
          const iframe = document.getElementById('pdfFrame');
          if (iframe) {
            const currentSrc = iframe.src;
            const newScale = Math.max((currentSrc.match(/zoom=([\d.]+)/) ? parseFloat(RegExp.$1) * 0.8 : 1), 0.5);
            iframe.src = currentSrc.replace(/#.*$/, '') + `#view=FitH&zoom=${newScale}`;
          }
        };
        
        window.resetPDF = function() {
          const iframe = document.getElementById('pdfFrame');
          if (iframe) {
            iframe.src = filePath + '#view=FitH';
          }
        };
        
        window.fallbackToPDFJS = function() {
          console.log('å›é€€åˆ°PDF.jsæ¨¡å¼');
          loadPDFWithPDFJS(filePath);
        };
      }
      
 // ç§»åŠ¨ç«¯ä¸“ç”¨PDFåŠ è½½å‡½æ•° - è¶…çº§å…¼å®¹ç‰ˆ
      async function loadPDFWithPDFJS(filePath) {
        const content = document.getElementById('content');
        
        try {
          // ç§»åŠ¨ç«¯ä¼˜åŒ–çš„å®¹å™¨å¸ƒå±€
          const pdfContainer = `
            <div class="pdf-container" style="height: 100vh; display: flex; flex-direction: column;">
              <div class="pdf-controls" style="flex-shrink: 0; padding: 8px; background: #f8f9fa; border-bottom: 1px solid #ddd; display: flex; flex-wrap: wrap; gap: 5px; align-items: center; justify-content: center;">
                <button onclick="prevPage()" style="padding: 6px 10px; font-size: 14px; margin: 2px;">ä¸Šä¸€é¡µ</button>
                <span style="margin: 0 5px; font-size: 12px;">
                  <input type="number" id="pageNum" value="1" min="1" style="width: 45px; font-size: 14px; text-align: center;"> / <span id="pageCount">0</span>
                </span>
                <button onclick="nextPage()" style="padding: 6px 10px; font-size: 14px; margin: 2px;">ä¸‹ä¸€é¡µ</button>
                <button onclick="fitWidth()" style="padding: 6px 10px; font-size: 14px; margin: 2px;">é€‚åº”</button>
                <button onclick="zoomInPDFJS()" style="padding: 6px 10px; font-size: 14px; margin: 2px;">æ”¾å¤§</button>
                <button onclick="zoomOutPDFJS()" style="padding: 6px 10px; font-size: 14px; margin: 2px;">ç¼©å°</button>
                <button onclick="downloadPDF()" style="padding: 6px 10px; font-size: 14px; margin: 2px;">ä¸‹è½½</button>
                <button onclick="switchToIframe()" style="padding: 6px 10px; font-size: 14px; margin: 2px;">åˆ‡æ¢æ¨¡å¼</button>
              </div>
              <div class="pdf-canvas-container" id="pdfCanvasContainer" style="flex: 1; overflow: auto; background: #525659; display: flex; justify-content: center; align-items: flex-start; padding: 10px;">
                <canvas id="pdfCanvas" style="background: white; box-shadow: 0 2px 8px rgba(0,0,0,0.3); max-width: 100%; height: auto;"></canvas>
                <div id="pdfError" style="display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 20px; text-align: center; color: white; font-size: 14px;"></div>
              </div>
            </div>
          `;
          
          content.innerHTML = pdfContainer;
          
          // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
          const errorDiv = document.getElementById('pdfError');
          errorDiv.innerHTML = `
            <div style="font-size: 18px; margin-bottom: 10px;">ğŸ“„</div>
            <div id="loadingText">æ­£åœ¨åŠ è½½PDFæ–‡æ¡£...</div>
            <div style="font-size: 12px; margin-top: 5px; opacity: 0.8;" id="loadingSubtext">è¯·ç¨å€™ï¼Œé¦–æ¬¡åŠ è½½å¯èƒ½è¾ƒæ…¢</div>
            <div style="margin-top: 10px; width: 200px; height: 4px; background: rgba(255,255,255,0.3); border-radius: 2px;">
              <div id="progressBar" style="width: 0%; height: 100%; background: #007bff; border-radius: 2px; transition: width 0.3s;"></div>
            </div>
            <div style="margin-top: 15px;">
              <button onclick="cancelLoad()" style="padding: 8px 15px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer;">
                å–æ¶ˆåŠ è½½
              </button>
            </div>
          `;
          errorDiv.style.display = 'flex';
          
          // æ¨¡æ‹ŸåŠ è½½è¿›åº¦
          let progress = 0;
          const progressInterval = setInterval(() => {
            progress += Math.random() * 15;
            if (progress > 90) progress = 90;
            const progressBar = document.getElementById('progressBar');
            if (progressBar) {
              progressBar.style.width = progress + '%';
            }
          }, 1000);
          
          // æ·»åŠ å–æ¶ˆåŠ è½½å‡½æ•°
          window.cancelLoad = function() {
            throw new Error('ç”¨æˆ·å–æ¶ˆäº†PDFåŠ è½½');
          };
          
          // å¼ºåˆ¶é‡æ–°åŠ è½½PDF.jsåº“ï¼ˆè§£å†³ç¼“å­˜é—®é¢˜ï¼‰
          console.log('æ£€æŸ¥PDF.jsåº“çŠ¶æ€...');
          
          // æ£€æŸ¥ç½‘ç»œè¿æ¥
          if (!navigator.onLine) {
            throw new Error('ç½‘ç»œè¿æ¥ä¸å¯ç”¨ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®');
          }
          
          // ç¡®ä¿PDF.jsåº“å·²åŠ è½½ - å¢å¼ºæ£€æŸ¥
          let retryCount = 0;
          while (typeof pdfjsLib === 'undefined' && retryCount < 20) {
            console.log(`ç­‰å¾…PDF.jsåº“åŠ è½½... (${retryCount + 1}/20)`);
            await new Promise(resolve => setTimeout(resolve, 500));
            retryCount++;
          }
          
          if (typeof pdfjsLib === 'undefined') {
            // å°è¯•åŠ¨æ€åŠ è½½PDF.js
            console.log('PDF.jsåº“æœªåŠ è½½ï¼Œå°è¯•åŠ¨æ€åŠ è½½...');
            try {
              const script = document.createElement('script');
              script.src = 'https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.min.js';
              script.onload = async function() {
                console.log('PDF.jsåº“åŠ¨æ€åŠ è½½æˆåŠŸ');
                await new Promise(resolve => setTimeout(resolve, 1000));
              };
              document.head.appendChild(script);
              
              // ç­‰å¾…åŠ¨æ€åŠ è½½å®Œæˆ
              let dynamicRetry = 0;
              while (typeof pdfjsLib === 'undefined' && dynamicRetry < 10) {
                await new Promise(resolve => setTimeout(resolve, 500));
                dynamicRetry++;
              }
              
              if (typeof pdfjsLib === 'undefined') {
                throw new Error('PDF.jsåº“åŠ¨æ€åŠ è½½å¤±è´¥');
              }
            } catch (loadError) {
              throw new Error('æ— æ³•åŠ è½½PDF.jsåº“ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–åˆ·æ–°é¡µé¢é‡è¯•');
            }
          }
          
          // é…ç½®PDF.js worker
          if (!pdfjsLib.GlobalWorkerOptions.workerSrc) {
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js';
          }
          
          // åŠ è½½PDFæ–‡æ¡£ - å¢å¼ºé…ç½® + è¶…æ—¶å¤„ç†
          const url = filePath;
          
          // æ·»åŠ è¶…æ—¶æ§åˆ¶
          const loadingTimeout = setTimeout(() => {
            errorDiv.innerHTML = `
              <div style="font-size: 18px; margin-bottom: 10px;">â°</div>
              <div>PDFåŠ è½½è¶…æ—¶</div>
              <div style="font-size: 12px; margin-top: 5px; opacity: 0.8;">æ–‡ä»¶å¯èƒ½è¿‡å¤§æˆ–ç½‘ç»œè¾ƒæ…¢</div>
              <div style="margin-top: 15px; display: flex; flex-direction: column; gap: 10px;">
                <button onclick="retryLoad()" style="padding: 8px 15px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
                  ğŸ”„ é‡è¯•åŠ è½½
                </button>
                <button onclick="fallbackToOtherMethod()" style="padding: 8px 15px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer;">
                  ğŸ“‚ å…¶ä»–æ–¹å¼
                </button>
              </div>
            `;
          }, 30000); // 30ç§’è¶…æ—¶
          
          // æ·»åŠ é‡è¯•å’Œå…¶ä»–æ–¹å¼å‡½æ•°
          window.retryLoad = function() {
            clearTimeout(loadingTimeout);
            loadPDFWithPDFJS(filePath);
          };
          
          window.fallbackToOtherMethod = function() {
            clearTimeout(loadingTimeout);
            content.innerHTML = `
              <div class="loading" style="padding: 20px; text-align: center;">
                <h2 style="margin-bottom: 15px;">ğŸ˜” PDFåŠ è½½è¶…æ—¶</h2>
                <p style="margin-bottom: 20px;">æ–‡ä»¶è¿‡å¤§æˆ–ç½‘ç»œè¾ƒæ…¢ï¼Œè¯·å°è¯•å…¶ä»–æ–¹å¼</p>
                <div style="display: flex; flex-direction: column; gap: 10px;">
                  <a href="${filePath}" target="_blank" style="display: block; padding: 12px; background: #007bff; color: white; text-decoration: none; text-align: center; border-radius: 6px;">
                    ğŸ”— åœ¨æ–°çª—å£æ‰“å¼€
                  </a>
                  <a href="${filePath}" download style="display: block; padding: 12px; background: #28a745; color: white; text-decoration: none; text-align: center; border-radius: 6px;">
                    ğŸ“¥ ä¸‹è½½PDFæ–‡ä»¶
                  </a>
                </div>
              </div>
            `;
          };
          
          // æ›´æ–°åŠ è½½çŠ¶æ€
          document.getElementById('loadingText').textContent = 'æ­£åœ¨è§£æPDFæ–‡ä»¶...';
          document.getElementById('loadingSubtext').textContent = 'æ–‡ä»¶è¾ƒå¤§æ—¶éœ€è¦æ›´å¤šæ—¶é—´';
          
          console.log('å¼€å§‹åŠ è½½PDF:', filePath);
          
          const loadingTask = pdfjsLib.getDocument({
            url: url,
            cMapUrl: 'https://unpkg.com/pdfjs-dist@3.11.174/cmaps/',
            cMapPacked: true,
            disableAutoFetch: false,
            disableStream: false,
            // é’ˆå¯¹ç§»åŠ¨ç«¯çš„ä¼˜åŒ–é…ç½®
            maxImageSize: 1024 * 1024, // é™åˆ¶å›¾ç‰‡å¤§å°
            isEvalSupported: false // ç¦ç”¨evalæå‡å®‰å…¨æ€§
          });
          
          // æ·»åŠ è¿›åº¦ç›‘å¬
          loadingTask.onProgress = function(progressData) {
            if (progressData.total > 0) {
              const percent = Math.round((progressData.loaded / progressData.total) * 80); // æœ€å¤š80%ï¼Œç•™20%ç»™æ¸²æŸ“
              const progressBar = document.getElementById('progressBar');
              if (progressBar) {
                progressBar.style.width = percent + '%';
              }
            }
          };
          
          let pdf;
          try {
            pdf = await loadingTask.promise;
            clearTimeout(loadingTimeout);
            clearInterval(progressInterval);
            
            // æ›´æ–°è¿›åº¦æ¡åˆ°100%
            const progressBar = document.getElementById('progressBar');
            if (progressBar) {
              progressBar.style.width = '100%';
            }
            
            document.getElementById('loadingText').textContent = 'PDFåŠ è½½æˆåŠŸï¼';
            document.getElementById('loadingSubtext').textContent = `å…±${pdf.numPages}é¡µï¼Œæ­£åœ¨æ¸²æŸ“...`;
            
            console.log('PDFåŠ è½½æˆåŠŸï¼Œå…±', pdf.numPages, 'é¡µ');
          } catch (loadError) {
            clearTimeout(loadingTimeout);
            clearInterval(progressInterval);
            throw new Error(`PDFåŠ è½½å¤±è´¥: ${loadError.message}`);
          }
          
          // éšè—åŠ è½½ä¿¡æ¯ï¼Œæ˜¾ç¤ºcanvas
          errorDiv.style.display = 'none';
          const canvas = document.getElementById('pdfCanvas');
          canvas.style.display = 'block';
          
          // æ›´æ–°é¡µç æ€»æ•°
          document.getElementById('pageCount').textContent = pdf.numPages;
          
          // ç§»åŠ¨ç«¯æ™ºèƒ½ç¼©æ”¾è®¡ç®—
          let currentPage = 1;
          const screenWidth = window.innerWidth;
          const screenHeight = window.innerHeight - 80; // å‡å»æ§åˆ¶æ é«˜åº¦
          
          let currentScale = 1.0;
          if (screenWidth <= 380) {
            currentScale = 0.8;
          } else if (screenWidth <= 480) {
            currentScale = 1.0;
          } else {
            currentScale = 1.2;
          }
          
          // æ¸²æŸ“é¡µé¢å‡½æ•°
          async function renderPage(pageNum) {
            try {
              console.log('æ¸²æŸ“é¡µé¢:', pageNum);
              
              const page = await pdf.getPage(pageNum);
              const viewport = page.getViewport({ scale: currentScale });
              
              // è®¾ç½®canvaså°ºå¯¸ - ç§»åŠ¨ç«¯ä¼˜åŒ–
              const maxWidth = screenWidth - 20;
              const maxHeight = screenHeight - 20;
              
              let finalScale = currentScale;
              if (viewport.width > maxWidth) {
                finalScale = maxWidth / viewport.width;
              }
              
              const finalViewport = page.getViewport({ scale: finalScale });
              
              canvas.width = finalViewport.width;
              canvas.height = finalViewport.height;
              
              canvas.style.width = finalViewport.width + 'px';
              canvas.style.height = finalViewport.height + 'px';
              
              const renderContext = {
                canvasContext: canvas.getContext('2d'),
                viewport: finalViewport
              };
              
              await page.render(renderContext).promise;
              document.getElementById('pageNum').value = pageNum;
              
              // æ»šåŠ¨åˆ°åˆé€‚ä½ç½®
              const container = document.getElementById('pdfCanvasContainer');
              container.scrollTop = 0;
              
              console.log('é¡µé¢æ¸²æŸ“å®Œæˆ:', pageNum);
            } catch (error) {
              console.error('é¡µé¢æ¸²æŸ“é”™è¯¯:', error);
              throw new Error(`ç¬¬${pageNum}é¡µæ¸²æŸ“å¤±è´¥: ${error.message}`);
            }
          }
          
          // å…¨å±€å‡½æ•° - ç§»åŠ¨ç«¯ä¼˜åŒ–
          window.prevPage = async function() {
            if (currentPage > 1) {
              currentPage--;
              await renderPage(currentPage);
            }
          };
          
          window.nextPage = async function() {
            if (currentPage < pdf.numPages) {
              currentPage++;
              await renderPage(currentPage);
            }
          };
          
          window.fitWidth = async function() {
            try {
              const containerWidth = screenWidth - 20;
              const page = await pdf.getPage(currentPage);
              const viewport = page.getViewport({ scale: 1 });
              currentScale = containerWidth / viewport.width;
              await renderPage(currentPage);
            } catch (error) {
              console.error('é€‚åº”å®½åº¦é”™è¯¯:', error);
            }
          };
          
          window.zoomInPDFJS = async function() {
            currentScale = Math.min(currentScale * 1.2, 3);
            await renderPage(currentPage);
          };
          
          window.zoomOutPDFJS = async function() {
            currentScale = Math.max(currentScale / 1.2, 0.5);
            await renderPage(currentPage);
          };
          
          window.downloadPDF = function() {
            try {
              const link = document.createElement('a');
              link.href = filePath;
              link.download = filePath.split('/').pop();
              link.click();
            } catch (error) {
              console.error('ä¸‹è½½é”™è¯¯:', error);
              window.open(filePath, '_blank');
            }
          };
          
          window.switchToIframe = function() {
            console.log('åˆ‡æ¢åˆ°iframeæ¨¡å¼');
            loadPDFWithIframe(filePath);
          };
          
          // é¡µç è¾“å…¥ç›‘å¬ - ç§»åŠ¨ç«¯ä¼˜åŒ–
          document.getElementById('pageNum').addEventListener('change', async function(e) {
            const pageNum = parseInt(e.target.value);
            if (pageNum >= 1 && pageNum <= pdf.numPages) {
              currentPage = pageNum;
              await renderPage(currentPage);
            } else {
              e.target.value = currentPage;
            }
          });
          
          // è§¦æ‘¸æ»‘åŠ¨ç¿»é¡µï¼ˆå¯é€‰ï¼‰
          let touchStartY = 0;
          canvas.addEventListener('touchstart', function(e) {
            touchStartY = e.touches[0].clientY;
          });
          
          canvas.addEventListener('touchend', function(e) {
            const touchEndY = e.changedTouches[0].clientY;
            const diff = touchStartY - touchEndY;
            
            if (Math.abs(diff) > 50) { // æ»‘åŠ¨è·ç¦»å¤§äº50px
              if (diff > 0 && currentPage < pdf.numPages) {
                // å‘ä¸Šæ»‘åŠ¨ï¼Œä¸‹ä¸€é¡µ
                window.nextPage();
              } else if (diff < 0 && currentPage > 1) {
                // å‘ä¸‹æ»‘åŠ¨ï¼Œä¸Šä¸€é¡µ
                window.prevPage();
              }
            }
          });
          
          // åˆå§‹æ¸²æŸ“
          await renderPage(currentPage);
          
        } catch (error) {
          console.error('PDFåŠ è½½é”™è¯¯:', error);
          
          // ç§»åŠ¨ç«¯å‹å¥½çš„é”™è¯¯å¤„ç†
          const errorHtml = `
            <div class="loading" style="padding: 20px; text-align: center;">
              <h2 style="color: #dc3545; margin-bottom: 15px;">ğŸ˜” PDFåŠ è½½å¤±è´¥</h2>
              <p style="margin-bottom: 20px;">${error.message}</p>
              <div style="display: flex; flex-direction: column; gap: 10px;">
                <a href="${filePath}" target="_blank" style="display: block; padding: 12px; background: #007bff; color: white; text-decoration: none; text-align: center; border-radius: 6px; font-size: 16px;">
                  ğŸ”— åœ¨æ–°çª—å£æ‰“å¼€
                </a>
                <a href="${filePath}" download style="display: block; padding: 12px; background: #28a745; color: white; text-decoration: none; text-align: center; border-radius: 6px; font-size: 16px;">
                  ğŸ“¥ ä¸‹è½½PDFæ–‡ä»¶
                </a>
                <button onclick="location.reload()" style="padding: 12px; background: #ffc107; color: black; border: none; border-radius: 6px; cursor: pointer; font-size: 16px;">
                  ğŸ”„ é‡æ–°åŠ è½½
                </button>
              </div>
              <p style="margin-top: 20px; font-size: 12px; color: #666;">
                å¦‚æœä»ç„¶æ— æ³•æŸ¥çœ‹ï¼Œè¯·å°è¯•ä½¿ç”¨å…¶ä»–æµè§ˆå™¨ï¼ˆå¦‚Chromeã€Safariï¼‰
              </p>
            </div>
          `;
          content.innerHTML = errorHtml;
        }
      }
      
      // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
      document.addEventListener('DOMContentLoaded', function() {
        // å¯ä»¥åœ¨è¿™é‡Œè®¾ç½®é»˜è®¤åŠ è½½çš„æ–‡æ¡£
        // loadMarkdown('README.md');
      });
    </script>
  </body>
</html>